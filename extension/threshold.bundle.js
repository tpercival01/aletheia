(()=>{document.getElementById("return_button").addEventListener("click",()=>{window.location.href=chrome.runtime.getURL("ui/settings/settings.html")});const e={low:[.45,.9],medium:[.3,.8],high:[.2,.6]},t=document.getElementById("preset_low"),l=document.getElementById("preset_med"),n=document.getElementById("preset_high");let o=null;const d=document.getElementById("threshold1"),r=document.getElementById("threshold2"),s=document.getElementById("threshold1_value"),i=document.getElementById("threshold2_value"),u=document.querySelector("#threshold_preview .green"),c=document.querySelector("#threshold_preview .yellow"),a=document.querySelector("#threshold_preview .red");function m(){if(o){let t=e[o][0],l=e[o][1];d.value=t,r.value=l,t>=l&&(t=Math.min(t,l-.01),d.value=t.toFixed(2)),s.textContent=t.toFixed(2),i.textContent=l.toFixed(2),u.style.flexGrow=t,c.style.flexGrow=l-t,a.style.flexGrow=1-l}let t=parseFloat(d.value),l=parseFloat(r.value);t>=l&&(t=Math.min(t,l-.01),d.value=t.toFixed(2)),s.textContent=t.toFixed(2),i.textContent=l.toFixed(2),u.style.flexGrow=t,c.style.flexGrow=l-t,a.style.flexGrow=1-l}function h(){const e=parseFloat(d.value),t=parseFloat(r.value);chrome.storage.local.get("settings",l=>{let n=l.settings||{};n.thresholds=[e,t],chrome.storage.local.set({settings:n})})}d.addEventListener("input",()=>{o=null,h(),m()}),r.addEventListener("input",()=>{o=null,h(),m()}),t.addEventListener("click",()=>{o="low",m(),h()}),l.addEventListener("click",()=>{o="medium",m(),h()}),n.addEventListener("click",()=>{o="high",m(),h()})})();